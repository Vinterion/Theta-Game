#ifndef __FILESYS_H_
#define __FILESYS_H_

#include<map>
#include<fstream>
#include"Chunk.h"

namespace theta{
  
  struct FileManager {
    static void save_map(const std::string& path,
			 const Chunk_map& map){
      std::ofstream file(path);
      for(auto& chunk : map){
	for(const auto& block : chunk){
	  auto x = block->get_position().x;
	  auto y =  block->get_position().y;
	  int16_t x_i = static_cast<int16_t>(x/32.f);
	  int16_t y_i = static_cast<int16_t>(y/32.f);
	  int32_t i = (x_i << 16) + y_i;
	  file << std::to_string(i) << ',' << static_cast<char>(block->type()) << '\n';
	}
      }
    }
  }; 
}

#endif
